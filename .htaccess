# Apache Configuration for Property Management System

# Enable Rewrite Engine
RewriteEngine On

# Redirect to public directory
RewriteCond %{REQUEST_URI} !^/public/
RewriteCond %{REQUEST_URI} !^/install/
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/assets/
RewriteCond %{REQUEST_URI} !^/config/
RewriteCond %{REQUEST_URI} !^/database/
RewriteCond %{REQUEST_URI} !^/includes/
RewriteRule ^(.*)$ /public/$1 [L]

# API Routes
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.*)$ /api/$1 [L]

# Install Routes
RewriteCond %{REQUEST_URI} ^/install/
RewriteRule ^install/(.*)$ /install/$1 [L]

# Security: Prevent direct access to config files
<FilesMatch "^(config|includes|database)">
    Order allow,deny
    Deny from all
</FilesMatch>

# Security: Prevent access to .php files in config and includes directories
<DirectoryMatch "^.*/(config|includes|database)">
    <FilesMatch "\.php$">
        Order allow,deny
        Deny from all
    </FilesMatch>
</DirectoryMatch>

# Set default index file
DirectoryIndex index.php index.html

# Enable PHP error reporting (disable in production)
php_flag display_errors On
php_value error_reporting E_ALL

